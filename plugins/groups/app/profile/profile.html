<header *ngIf="group">
  <minds-banner [object]="group" [editMode]="editing" [top]="group.banner_position" (added)="add_banner($event)" *ngIf="group.banner || editing"></minds-banner>
</header>

<div class="mdl-grid groups-grid" style="max-width:900px" *ngIf="group">

  <div class="mdl-cell mdl-cell--12-col minds-group-title">
    <h1 [hidden]="editing">{{group.name}}</h1>
    <input type="text" [hidden]="!editing" [(ngModel)]="group.name" />
  </div>

</div>

<div class="mdl-tabs__tab-bar groups-tabs" *ngIf="group">
  <a [routerLink]="['/Groups-Profile', {guid: group.guid, filter: 'activity'}]" class="mdl-tabs__tab" [ngClass]="{'is-active': filter == 'activity'}">Feed</a>
  <a [routerLink]="['/Groups-Profile', {guid: group.guid, filter: 'members'}]" class="mdl-tabs__tab" [ngClass]="{'is-active': filter == 'members'}">{{group['members:count']}} members</a>
  <a *ngIf="group.membership != 2" [routerLink]="['/Groups-Profile', {guid: group.guid, filter: 'requests'}]" class="mdl-tabs__tab" [ngClass]="{'is-active': filter == 'requests'}">{{group['requests:count']}} requests</a>

  <minds-button-edit (click)="toggleEdit()" [hidden]="editing" *ngIf="session.getLoggedInUser().guid == group.owner_guid">
    <button class="material-icons">mode_edit</button>
  </minds-button-edit>
  <minds-button-edit (click)="save()" [hidden]="!editing" *ngIf="session.getLoggedInUser().guid == group.owner_guid">
    <button>Save changes</button>
  </minds-button-edit>
  <minds-button-feature [object]="group" *ngIf="session.isAdmin()"></minds-button-feature>

  <minds-groups-join-button [group]="group" *ngIf="session.getLoggedInUser().guid != group.owner_guid"></minds-groups-join-button>

</div>

<div class="mdl-grid groups-grid newsfeed-grid" style="max-width:900px" *ngIf="group">

  <!-- Activity feed -->
  <minds-groups-profile-feed [group]="group" class="mdl-cell mdl-cell--8-col" *ngIf="filter == 'activity'">
  </minds-groups-profile-feed>
  <!-- END: Activity feed -->

  <!-- Members filter -->
  <minds-groups-profile-members [group]="group" class="mdl-cell mdl-cell--8-col mdl-grid" *ngIf="filter == 'members'">
  </minds-groups-profile-members>
  <!-- END: Members filter -->

  <!-- Requests Filter -->
  <minds-groups-profile-requests [group]="group" class="mdl-cell mdl-cell--8-col mdl-grid" *ngIf="filter == 'requests'">
  </minds-groups-profile-requests>
  <!-- END: Requests filter -->

  <!-- Sidebar -->
  <div class="mdl-cell mdl-cell--4-col">
    <!-- Brief description -->
    <div class="mdl-card mdl-shadow--4dp" style="width:auto; min-height:0;">

      <minds-avatar [object]="group" [edit-mode]="editing" (added)="upload_avatar($event)"></minds-avatar>


      <div class="mdl-card__supporting-text mdl-color-text--grey-600" style="min-height:0;">
        {{group.briefdescription}}
      </div>

    </div>

    <!-- Members -->
    <div class="mdl-card mdl-shadow--4dp" style="width:auto">
      <div class="mdl-card__title">
        <h2 class="mdl-card__title-text">Members</h2>
      </div>

      <!-- Avatars of latest users -->
      <div class="mdl-card__supporting-text mdl-color-text--grey-600 members-grid" style="min-height:0;">
        <a *ngFor="#member of group.members" [routerLink]="['/Channel', {username: member.username}]" >
          <img src="/icon/{{member.guid}}/small"/>
        </a>
      </div>

    </div>

  </div>
</div>
