<div class="m-messenger-conversation m-messenger-dockpane mdl-shadow--4dp" [class.m-messenger-dockpane-open]="conversation.open">

  <div class="m-messenger-dockpane-tab mdl-color-text--blue-grey-700" (click)="dockpanes.toggle(conversation)">
    <div class="m-messenger-dockpane-tab-title">
      <span *ngFor="#participant of conversation.participants">{{participant.username}}</span>
    </div>
    <i class="material-icons" (click)="dockpanes.close(conversation)">close</i>
  </div>

  <div class="m-messenger-dockpane-container mdl-shadow--2dp">

    <div class="m-messenger-conversation-encryption-lock" *ngIf="!encryption.isOn()">
      <minds-messenger-encryption></minds-messenger-encryption>
    </div>

    <div class="m-messenger-conversation-messages" *ngIf="encryption.isOn()" minds-messenger-scroll [messages]="messages">
      <div class="m-messenger-conversation-messages-message"
        *ngFor="#message of messages"
        [class.odd]="message.owner.guid == session.getLoggedInUser().guid">
          <img [src]="minds.cdn_url + 'icon/' + message.owner.guid + '/small'" *ngIf="message.owner.guid == session.getLoggedInUser().guid">
          <div class="minds-messenger-conversation-message-bubble mdl-color--blue-grey-50 mdl-color-text--blue-grey-700">
            {{message.message}}
          </div>
          <span class="minds-messenger-conversation-message-ts"></span>
          <img [src]="minds.cdn_url + 'icon/' + message.owner.guid + '/small'" *ngIf="message.owner.guid != session.getLoggedInUser().guid">
      </div>
    </div>

    <div class="m-messenger-conversation-composer" *ngIf="encryption.isOn()">
      <textarea placeholder="Type your message here"
      [(ngModel)]="message"
      (keydown.enter)="send($event)"
      #input
      rows="1"></textarea>
      <i class="material-icons mdl-color-text--blue-grey-600" [emoji] [for]="input">mood</i>
      <i class="material-icons mdl-color-text--blue-grey-600" (click)="send($event)">send_arrow</i>
    </div>
  </div>

</div>
